(function(f,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(f=typeof globalThis<"u"?globalThis:f||self,f.MarkdownJS=u())})(this,function(){"use strict";return(u,m={})=>{u=u.replace(/(\r\n|\r)/g,`
`).replace(/\t/g,"  ");let o="";function c(n){m.debug&&console.log(n),o+=n}const R=m.isOpenInNewTab?' target="_blank" rel="noopener"':"";function E(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?)em&gt;/g,"<$1em>")}function p(n){return n.replace(/\\\\/g,"ðŸ”®-S").replace(/\\</g,"&lt;").replace(/\\>/g,"&gt;").replace(/(``*)\s*(.+?)\s*\1/g,(t,e,r)=>`<code>${E(r)}</code>`).replace(/([^\\]|^)!\[([^<]*?)\]\(([^<]*?)\)/g,(t,e,r,l)=>{const h=m.imageCdnUrl&&!l.match(/^(?:\/|http:|https:)/)?m.imageCdnUrl:"";return`${e}<img alt="${r}" src="${h}${l}">`}).replace(/([^\\]|^)\[(.*?)\]\((#[^<]*?)\)/g,'$1<a href="$3">$2</a>').replace(/([^\\]|^)\[(.*?)\]\(([^<]*?)\)/g,`$1<a${R} href="$3">$2</a>`).replace(/([^\\]|^)(?:<|&lt;)([a-zA-Z]+:.*)(?:>|&gt;)/g,(t,e,r)=>r.indexOf("<em>")!==-1?t:`${e}<a${R} href="${r}">${r}</a>`).replace(/([^\\]|^)\*\*(.+?)\*\*/g,"$1<b>$2</b>").replace(/([^\\]|^)\*(.+?)\*/g,"$1<i>$2</i>").replace(/([^\\]|^)~~(.+?)~~/g,"$1<s>$2</s>").replace(/\\([!\[\*\~``#])/g,"$1").replace(/\ðŸ”®-S/g,"\\")}function $(n){const t=n.match(/^( *)(\*|\-|\d+\.) .+(?:\n.+|\n\n  .+)*/);if(!t)return 0;const[e,r,l]=t,h=["*","-"].includes(l);let s=[];return r!==""?s=e.split(new RegExp(`(?:
|^)${r}(?:\\*|\\-|\\d+\\.) `)):s=e.split(/(?:^|\n)(?:\*|\-|\d+\.) /g),s.shift(),c(`<${h?"ol":"ul"}>`),s.forEach(a=>{c("<li>"),a=a.trim();const i=a.match(/^\[(\s|x)\]/);if(i){a=a.substring(3);const[,g]=i;c(`<input disabled ${g==="x"?"checked":""} type="checkbox"></input>`)}a.indexOf(`
`)!=-1?x([d,$,b,k,T,S],a):c(p(a)),c("</li>")}),c(`</${h?"ol":"ul"}>`),e.length}function T(n){const t=n.match(/^\s*(.+)(\n|$)/);if(!t)return 0;const[e,r]=t;return c(p(r)),e.length}function d(n){const t=n.match(/^(#{1,6})\s+(.*?)(?:\s*|\s*{#([a-zA-Z]\S*)})(?:\n+|$)/);if(!t)return 0;const[e,r,l,h]=t;return c(`<h${r.length}>${p(l)}</h${r.length}>`),e.length}function C(n){const t=n.match(/^([*-]){3,}(?:\n+|$)/);if(!t)return 0;const[e,r]=t;return c(`<${r==="*"?"br":"hr"} />`),e.length}function b(n){const t=n.match(/^ *(``{2,})(?:(\S+)|)\n([\s\S]*?)\n\1/);if(!t)return 0;const[e,,r,l]=t;return c(`<pre><code${r===void 0?"":` class="language-'${r}"`}>${E(l)}</code></pre>`),e.length}function _(n){const t=n.match(/^<([a-zA-Z\-]+)[\s|>][\s\S]*?(?:<\/\1>\s*|\n{2,}|$)/);if(!t)return 0;const[e,r]=t;return c(e),e.length}function w(n){const t=n.match(/^.+\n*/);if(!t)return 0;const[e]=t;return c(`<p>${p(e)}</p>`),e.length}function k(n){const t=n.match(/^(\s*)(?:>|&gt;)(?:\s|\[(\S+?)\]\s)([\s\S]*?)(?:\n{2,}|$)/);if(!t)return 0;const[e,,r,l]=t;return c(`<blockquote${r===void 0?"":` class="${r}"`}>`),x([d,$,k,b,w,S],l.replace(/\n\s*(>|&gt;) */g,`
`)),c("</blockquote>"),e.length}function q(n){const t=n.match(/^\|*(.+\|[^\|^\n]+.*?)\|*\n\|*([-:\| ]+?\|[-:\| ]+?.*?)\|*\n(\|*(?:(?:.+\|[^\|^\n]+.*?)\|*(?:\n|$))*)/);if(!t)return 0;const[e,r,l,h]=t;let s=[];return l.split("|").forEach(a=>{a=a.trim();const i=a.startsWith(":"),g=a.endsWith(":");i&&g?s.push("center"):g?s.push("right"):s.push("left")}),c("<table><thead><tr>"),r.split("|").map(a=>a.trim()).forEach((a,i)=>{c(`<th align="${s[i]}">${p(a)}</th>`)}),c("</tr></thead>"),h.trim().split(`
`).forEach(a=>{c("<tr>"),a.replace(/^\||\|$/g,"").split("|").forEach((i,g)=>{c(`<td align="${s[g]}">${p(i)}</td>`)}),c("</tr>")}),c("</table>"),e.length}function S(n){const t=n.match(/^\s*\n/);return t?t[0].length:0}function x(n,t){for(;t;){let e=0;n.find(r=>(e=r(t),e!==0)),t=t.substring(e)}}return x([d,C,$,b,k,q,w,_,S],u),o=o.replace(/(\s+)<\/p><p>/g,(n,t)=>t.split(`
`).length===2?" ":"</p><p>"),o=o.replace(/\s+<\/p>/g,"</p>"),o}});
